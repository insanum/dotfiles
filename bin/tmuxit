#!/bin/bash

LTRX=10.13.114.20

if [ -z $1 ]; then
    CMD=`basename $0`
    echo -e "\nUsage: $CMD [-h] <fat1|fat2|fat3|fat4|sunny>"
    cat << ESCAPES

  Dell iDRAC6 -> console com2 .......... #.
  HP ILO      -> vsp ................... <ESC>(
  SPARC ILOM  -> start /SP/console ..... #.
  Supermicro  -> start /system1/sol1 ... <ESC>T
  Cisco       -> connect host .......... <kill_network_connection>
  ipmiconsole -> ....................... &.

ESCAPES

    exit
fi

if [ $1 = "-h" ]; then
   HORIZ=$1
   shift
fi

function tmuxopen()
{
    tmux new-window -t $1 -n $2 \; send-keys -t $1 "$3" "Enter" \; split-window -t $1 $HORIZ
}

if [[ $1 = fat1 ]]; then
    #tmuxopen 6 fat1 "ipmiconsole -u ADMIN -P -h eadfat1.swdvt.lab.irv.broadcom.com"
    tmuxopen 6 fat1 "ssh ADMIN@eadfat1.swdvt.lab.irv.broadcom.com"
fi

if [[ $1 = fat2 ]]; then
    #tmuxopen 7 fat2 "ipmiconsole -u ADMIN -P -h eadfat2.swdvt.lab.irv.broadcom.com"
    tmuxopen 7 fat2 "ssh ADMIN@eadfat2.swdvt.lab.irv.broadcom.com"
fi

if [[ $1 = fat3 ]]; then
    #tmuxopen 8 fat3 "ipmiconsole -u ADMIN -P -h eadfat3.swdvt.lab.irv.broadcom.com"
    tmuxopen 8 fat3 "ssh ADMIN@eadfat3.swdvt.lab.irv.broadcom.com"
fi

if [[ $1 = fat4 ]]; then
    #tmuxopen 9 fat4 "ipmiconsole -u ADMIN -P -h eadfat4.swdvt.lab.irv.broadcom.com"
    tmuxopen 9 fat4 "ssh ADMIN@eadfat4.swdvt.lab.irv.broadcom.com"
fi

if [[ $1 = sunny ]]; then
    #tmuxopen 7 sunny "telnet $LTRX 10001"
    #tmuxopen 7 sunny "ipmiconsole -u root -P -h eadsunny.swdvt.lab.irv.broadcom.com"
    tmuxopen 7 sunny "ssh root@eadsunny.swdvt.lab.irv.broadcom.com"
fi

